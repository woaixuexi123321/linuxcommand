<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:m="clr-namespace:LinuxCommandCenter.Models"
             xmlns:vm="clr-namespace:LinuxCommandCenter.ViewModels"
             mc:Ignorable="d"
             d:DesignWidth="800"
             d:DesignHeight="450"
             x:Class="LinuxCommandCenter.Views.QuickCommandsView"
             x:DataType="vm:QuickCommandsViewModel">

  <Grid RowDefinitions="Auto,*">
    <!-- Header -->
    <StackPanel Orientation="Vertical"
                Spacing="4">
      <TextBlock Text="Quick commands"
                 FontSize="22"
                 FontWeight="SemiBold"
                 Foreground="#111827"/>
      <TextBlock Text="Run common Linux commands with a single click."
                 Foreground="#6B7280"
                 FontSize="13"/>
    </StackPanel>

    <!-- Content -->
    <Grid Grid.Row="1"
          Margin="0,16,0,0"
          ColumnDefinitions="2*,3*"
          ColumnSpacing="16">

      <!-- Presets list -->
      <Border Background="#F3F4F6"
              CornerRadius="18"
              Padding="14">
        <Grid RowDefinitions="Auto,*"
              RowSpacing="8">
          <TextBlock Text="Presets"
                     FontWeight="SemiBold"
                     Foreground="#111827"/>
          <ListBox Grid.Row="1"
                   Margin="0,4,0,0"
                   ItemsSource="{Binding Presets}"
                   SelectedItem="{Binding SelectedPreset}"
                   BorderThickness="0"
                   Background="Transparent">
            <ListBox.ItemTemplate>
              <DataTemplate x:DataType="m:CommandPreset">
                <Border Padding="8"
                        CornerRadius="10"
                        Background="#FFFFFF"
                        Margin="0,2">
                  <StackPanel Orientation="Vertical" Spacing="2">
                    <TextBlock Text="{Binding Name}"
                               FontWeight="SemiBold"
                               FontSize="13"/>
                    <TextBlock Text="{Binding Category}"
                               FontSize="11"
                               Foreground="#6B7280"/>
                    <TextBlock Text="{Binding Description}"
                               FontSize="11"
                               Foreground="#4B5563"
                               TextWrapping="Wrap"/>
                  </StackPanel>
                </Border>
              </DataTemplate>
            </ListBox.ItemTemplate>
          </ListBox>
        </Grid>
      </Border>

      <!-- Details and output -->
      <Border Grid.Column="1"
              Background="White"
              CornerRadius="18"
              Padding="16">
        <Grid RowDefinitions="Auto,Auto,*,Auto"
              RowSpacing="10">
          <!-- Selected info -->
          <StackPanel Orientation="Vertical" Spacing="2">
            <TextBlock Text="{Binding SelectedPreset.Name}"
                       FontSize="18"
                       FontWeight="SemiBold"
                       Foreground="#111827"/>
            <TextBlock Text="{Binding SelectedPreset.Description}"
                       Foreground="#4B5563"
                       FontSize="12"
                       TextWrapping="Wrap"/>
          </StackPanel>

          <!-- Arguments and preview -->
          <StackPanel Grid.Row="1"
                      Orientation="Vertical"
                      Spacing="6">
            <TextBlock Text="Extra arguments (optional)"
                       FontSize="12"
                       Foreground="#6B7280"/>
            <TextBox Text="{Binding AdditionalArguments, UpdateSourceTrigger=PropertyChanged}"
                     Watermark="Example: --help or a path"
                     Padding="6"
                     Background="#F9FAFB"/>

            <TextBlock Text="Command preview"
                       FontSize="12"
                       Margin="0,8,0,0"
                       Foreground="#6B7280"/>
            <Border Background="#111827"
                    CornerRadius="8"
                    Padding="8">
              <TextBlock Text="{Binding CommandPreview}"
                         FontFamily="Consolas, Menlo, monospace"
                         Foreground="#E5E7EB"
                         TextWrapping="Wrap"/>
            </Border>
          </StackPanel>

          <!-- Output -->
          <Grid Grid.Row="2"
                RowDefinitions="Auto,*,Auto"
                RowSpacing="6"
                Margin="0,6,0,0">
            <TextBlock Text="Last result"
                       FontSize="12"
                       Foreground="#6B7280"/>

            <TabControl Grid.Row="1">
              <TabItem Header="Standard output">
                <ScrollViewer Margin="4">
                  <TextBlock Text="{Binding Output}"
                             FontFamily="Consolas, Menlo, monospace"
                             FontSize="12"
                             TextWrapping="Wrap"/>
                </ScrollViewer>
              </TabItem>
              <TabItem Header="Error output">
                <ScrollViewer Margin="4">
                  <TextBlock Text="{Binding Error}"
                             FontFamily="Consolas, Menlo, monospace"
                             FontSize="12"
                             Foreground="#B91C1C"
                             TextWrapping="Wrap"/>
                </ScrollViewer>
              </TabItem>
            </TabControl>

            <TextBlock Grid.Row="2"
                       Text="{Binding Status}"
                       FontSize="12"
                       Foreground="#6B7280"/>
          </Grid>

          <!-- Run button -->
          <StackPanel Grid.Row="3"
                      Orientation="Horizontal"
                      HorizontalAlignment="Right"
                      Spacing="8">
            <ProgressBar Width="120"
                         IsIndeterminate="True"
                         IsVisible="{Binding IsBusy}"/>
            <Button Content="Run command"
                    Padding="16,6"
                    HorizontalAlignment="Right"
                    Command="{Binding RunSelectedCommandCommand}"
                    Background="#4F46E5"
                    Foreground="White"
                    BorderBrush="#4338CA"
                    BorderThickness="1"/>
          </StackPanel>
        </Grid>
      </Border>
    </Grid>
  </Grid>
</UserControl>